!function(){"use strict";const e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-btn",inputErrorClass:"form__input_type_error",errorClass:"form__error_visibility_shown"},t=(e,t)=>{(e=>e.some((e=>!e.validity.valid)))(e)?t.disabled=!0:t.disabled=!1},o=e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((o=>{o.addEventListener("submit",(e=>{e.preventDefault()})),((e,o)=>{const r=Array.from(e.querySelectorAll(o.inputSelector)),n=e.querySelector(o.submitButtonSelector);t(r,n),r.forEach((s=>{s.addEventListener("input",(()=>{((e,t,o)=>{t.validity.valid?((e,t,o)=>{const r=t.getAttribute("name"),n=e.querySelector(`.form__error_type_${r}`);t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass),n.textContent=""})(e,t,o):((e,t,o,r)=>{const n=t.getAttribute("name"),s=e.querySelector(`.form__error_type_${n}`);t.classList.add(r.inputErrorClass),s.textContent=o,s.classList.add(r.errorClass)})(e,t,t.validationMessage,o)})(e,s,o),t(r,n)}))}))})(o,e)}))};o(e);const r=document.querySelector("#edit-profile-modal"),n=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__name"),c=document.querySelector(".profile__bio"),a=document.forms["edit-profile-form"],l=document.querySelector('[name="name"]'),i=document.querySelector('[name="description"]'),u=document.querySelector("#new-post-modal"),m=document.querySelector(".profile__post-button"),d=document.forms["new-post-form"],p=document.querySelector('[name="link"]'),f=document.querySelector('[name="caption"]'),_=document.querySelector(".gallery"),y=document.querySelector("#card-template").content,v=document.querySelector("#post-modal"),b=v.querySelector(".modal__image"),S=v.querySelector(".modal__caption"),g=e=>{const t=document.querySelector(".modal_is-opened");e.target.classList.contains("modal")&&k(t)},h=e=>{const t=document.querySelector(".modal_is-opened");"Escape"===e.key&&k(t)},q=e=>{e.classList.add("modal_is-opened"),document.addEventListener("click",g),document.addEventListener("keydown",h)},k=e=>{e.classList.remove("modal_is-opened"),document.removeEventListener("click",g),document.removeEventListener("keydown",h)},w=e=>{const t=y.querySelector(".post").cloneNode(!0);t.querySelector(".post__caption").textContent=e.name;const o=t.querySelector(".post__image");o.setAttribute("src",e.link),o.setAttribute("alt",e.name);const r=t.querySelector(".post__like-button"),n=t.querySelector(".post__like-icon");return r.addEventListener("click",(()=>{const e=n.getAttribute("src").includes("active")?"./images/like-icon.svg":"./images/like-icon-active.svg";n.setAttribute("src",e),r.classList.toggle("post__like-button_status_active")})),t.querySelector(".post__delete-button").addEventListener("click",(()=>{t.remove()})),o.addEventListener("click",(()=>{b.setAttribute("src",e.link),b.setAttribute("alt",e.name),S.textContent=e.name,q(v)})),t};n.addEventListener("click",(()=>{l.value=s.textContent,i.value=c.textContent,resetInputErrors(a,[l,i],e),q(r)})),a.addEventListener("submit",(e=>{e.preventDefault(),s.textContent=l.value,c.textContent=i.value,k(r)})),m.addEventListener("click",(()=>q(u))),Array.from(document.querySelectorAll(".modal__close-btn")).forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>{k(t)}))})),d.addEventListener("submit",(e=>{e.preventDefault();const t={name:f.value,link:p.value},o=w(t);_.prepend(o),d.reset(),k(u)})),o(e),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Jellyfish in the ocean",link:"https://images.unsplash.com/photo-1745613184657-3c8dcd5f079a?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=w(e);_.append(t)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBU2tDLE1BQ2xDbEIsRUFBV3ZCLE1BR2JTLEVBQVcxQixpQkFBaUIsU0FBUyxJQUFNMkMsRUFBVWxCLEtBRXJEL0IsTUFBTUMsS0FBS0MsU0FBU0MsaUJBQWlCLHNCQUFzQkMsU0FBUzhELElBQ2xFLE1BQU12QixFQUFRdUIsRUFBT0MsUUFBUSxVQUU3QkQsRUFBTzVELGlCQUFpQixTQUFTLEtBQy9Cd0MsRUFBV0gsU0FtQmZWLEVBQVkzQixpQkFBaUIsVUFmUEMsSUFDcEJBLEVBQU1DLGlCQUVOLE1BQU00RCxFQUFVLENBQ2RiLEtBQU1wQixFQUFhNkIsTUFDbkJOLEtBQU14QixFQUFVOEIsT0FFWlgsRUFBY0YsRUFBZWlCLEdBQ25DaEMsRUFBUWlDLFFBQVFoQixHQUVoQnBCLEVBQVlxQyxRQUVaeEIsRUFBV2YsTUFLYmpDLEVBQWlCZixHRHJJVyxDQUMxQixDQUNFd0UsS0FBTSxjQUNORyxLQUFNLDJIQUVSLENBQ0VILEtBQU0seUJBQ05HLEtBQU0sMEtBRVIsQ0FDRUgsS0FBTSxrQkFDTkcsS0FBTSx5SEFFUixDQUNFSCxLQUFNLDREQUNORyxLQUFNLDJIQUVSLENBQ0VILEtBQU0sNEJBQ05HLEtBQU0sMEhBRVIsQ0FDRUgsS0FBTSxpQkFDTkcsS0FBTSw0SENnSEd0RCxTQUFTbUUsSUFDcEIsTUFBTWxCLEVBQWNGLEVBQWVvQixHQUNuQ25DLEVBQVFvQyxPQUFPbkIsSyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy9jYXJkcy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQtYnRuJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAnZm9ybV9fZXJyb3JfdmlzaWJpbGl0eV9zaG93bicsXHJcbn07XHJcblxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZVN1Ym1pdEJ1dHRvbiA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpID0+IHtcclxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVzZXRJbnB1dEVycm9ycyA9IChmb3JtLCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtLCBpbnB1dCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGAuZm9ybV9fZXJyb3JfdHlwZV8ke2lucHV0TmFtZX1gKTtcclxuXHJcbiAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbn07XHJcblxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtLCBpbnB1dCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcclxuICBjb25zdCBpbnB1dE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19lcnJvcl90eXBlXyR7aW5wdXROYW1lfWApO1xyXG5cclxuICBpbnB1dC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybSwgaW5wdXQsIGNvbmZpZykgPT4ge1xyXG4gIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHNob3dJbnB1dEVycm9yKGZvcm0sIGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGhpZGVJbnB1dEVycm9yKGZvcm0sIGlucHV0LCBjb25maWcpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybSwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gIHRvZ2dsZVN1Ym1pdEJ1dHRvbihpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybSwgaW5wdXQsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZVN1Ym1pdEJ1dHRvbihpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1FbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpLFxyXG4gICk7XHJcblxyXG4gIGZvcm1FbGVtZW50cy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybSwgY29uZmlnKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xyXG5cclxuZXhwb3J0IHsgc2V0dGluZ3MsIGVuYWJsZVZhbGlkYXRpb24gfTtcclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiAnVmFsIFRob3JlbnMnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnJyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICdKZWxseWZpc2ggaW4gdGhlIG9jZWFuJyxcclxuICAgIGxpbms6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTc0NTYxMzE4NDY1Ny0zYzhkY2Q1ZjA3OWE/cT04MCZ3PTI2NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4xLjAmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICdBbiBvdXRkb29yIGNhZmUnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzJyxcclxuICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnVHVubmVsIHdpdGggbW9ybmluZyBsaWdodCcsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnTW91bnRhaW4gaG91c2UnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnJyxcclxuICB9LFxyXG5dO1xyXG4iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHNldHRpbmdzIH0gZnJvbSAnLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzJztcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi4vc2NyaXB0cy9jYXJkcy5qcyc7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtcHJvZmlsZS1tb2RhbCcpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5jb25zdCBwcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2JpbycpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1snZWRpdC1wcm9maWxlLWZvcm0nXTtcclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJuYW1lXCJdJyk7XHJcbmNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJkZXNjcmlwdGlvblwiXScpO1xyXG5cclxuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ldy1wb3N0LW1vZGFsJyk7XHJcbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcG9zdC1idXR0b24nKTtcclxuY29uc3QgbmV3UG9zdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1snbmV3LXBvc3QtZm9ybSddO1xyXG5jb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImxpbmtcIl0nKTtcclxuY29uc3QgY2FwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJjYXB0aW9uXCJdJyk7XHJcblxyXG5jb25zdCBnYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnknKTtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLXRlbXBsYXRlJykuY29udGVudDtcclxuXHJcbmNvbnN0IHBvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3N0LW1vZGFsJyk7XHJcbmNvbnN0IHBvc3RNb2RhbEltYWdlID0gcG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1hZ2UnKTtcclxuY29uc3QgcG9zdE1vZGFsQ2FwdGlvbiA9IHBvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2NhcHRpb24nKTtcclxuXHJcbmNvbnN0IGhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XHJcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfaXMtb3BlbmVkJyk7XHJcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsJykpIHtcclxuICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUVzY2FwZSA9IChldmVudCkgPT4ge1xyXG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX2lzLW9wZW5lZCcpO1xyXG4gIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBvcGVuTW9kYWwgPSAobW9kYWwpID0+IHtcclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9pcy1vcGVuZWQnKTtcclxuXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZU1vZGFsID0gKG1vZGFsKSA9PiB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfaXMtb3BlbmVkJyk7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZSk7XHJcbn07XHJcblxyXG5jb25zdCBnZXRDYXJkRWxlbWVudCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLnBvc3QnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0X19jYXB0aW9uJyk7XHJcbiAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG5cclxuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdF9faW1hZ2UnKTtcclxuICBjYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBkYXRhLmxpbmspO1xyXG4gIGNhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGRhdGEubmFtZSk7XHJcblxyXG4gIGNvbnN0IGxpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdF9fbGlrZS1idXR0b24nKTtcclxuICBjb25zdCBsaWtlSWNvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3N0X19saWtlLWljb24nKTtcclxuICBsaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3JjID0gbGlrZUljb24uZ2V0QXR0cmlidXRlKCdzcmMnKS5pbmNsdWRlcygnYWN0aXZlJylcclxuICAgICAgPyAnLi9pbWFnZXMvbGlrZS1pY29uLnN2ZydcclxuICAgICAgOiAnLi9pbWFnZXMvbGlrZS1pY29uLWFjdGl2ZS5zdmcnO1xyXG4gICAgbGlrZUljb24uc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xyXG5cclxuICAgIGxpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZSgncG9zdF9fbGlrZS1idXR0b25fc3RhdHVzX2FjdGl2ZScpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBkZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdF9fZGVsZXRlLWJ1dHRvbicpO1xyXG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH0pO1xyXG5cclxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3N0TW9kYWxJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGRhdGEubGluayk7XHJcbiAgICBwb3N0TW9kYWxJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGRhdGEubmFtZSk7XHJcbiAgICBwb3N0TW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgb3Blbk1vZGFsKHBvc3RNb2RhbCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufTtcclxuXHJcbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZUpvYi50ZXh0Q29udGVudDtcclxuICByZXNldElucHV0RXJyb3JzKGVkaXRQcm9maWxlRm9ybSwgW25hbWVJbnB1dCwgam9iSW5wdXRdLCBzZXR0aW5ncyk7XHJcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG59KTtcclxuXHJcbmVkaXRQcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlSm9iLnRleHRDb250ZW50ID0gam9iSW5wdXQudmFsdWU7XHJcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcclxufSk7XHJcblxyXG5uZXdQb3N0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCkpO1xyXG5cclxuQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2Nsb3NlLWJ0bicpKS5mb3JFYWNoKChidXR0b24pID0+IHtcclxuICBjb25zdCBtb2RhbCA9IGJ1dHRvbi5jbG9zZXN0KCcubW9kYWwnKTtcclxuXHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY2xvc2VNb2RhbChtb2RhbCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgaGFuZGxlU3VibWl0ID0gKGV2ZW50KSA9PiB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgY2FyZE9iaiA9IHtcclxuICAgIG5hbWU6IGNhcHRpb25JbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGxpbmtJbnB1dC52YWx1ZSxcclxuICB9O1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZE9iaik7XHJcbiAgZ2FsbGVyeS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuXHJcbiAgbmV3UG9zdEZvcm0ucmVzZXQoKTtcclxuXHJcbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xyXG59O1xyXG5cclxubmV3UG9zdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlU3VibWl0KTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xyXG5cclxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGNhcmQpO1xyXG4gIGdhbGxlcnkuYXBwZW5kKGNhcmRFbGVtZW50KTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0b2dnbGVTdWJtaXRCdXR0b24iLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNvbmZpZyIsIkFycmF5IiwiZnJvbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJoaWRlSW5wdXRFcnJvciIsImlucHV0TmFtZSIsImdldEF0dHJpYnV0ZSIsImVycm9yRWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0UHJvZmlsZUJ0biIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUpvYiIsImVkaXRQcm9maWxlRm9ybSIsImZvcm1zIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0QnRuIiwibmV3UG9zdEZvcm0iLCJsaW5rSW5wdXQiLCJjYXB0aW9uSW5wdXQiLCJnYWxsZXJ5IiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsInBvc3RNb2RhbCIsInBvc3RNb2RhbEltYWdlIiwicG9zdE1vZGFsQ2FwdGlvbiIsImhhbmRsZUNsaWNrIiwibW9kYWwiLCJ0YXJnZXQiLCJjb250YWlucyIsImNsb3NlTW9kYWwiLCJoYW5kbGVFc2NhcGUiLCJrZXkiLCJvcGVuTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJuYW1lIiwiY2FyZEltYWdlIiwic2V0QXR0cmlidXRlIiwibGluayIsImxpa2VCdG4iLCJsaWtlSWNvbiIsInNyYyIsImluY2x1ZGVzIiwidG9nZ2xlIiwidmFsdWUiLCJyZXNldElucHV0RXJyb3JzIiwiYnV0dG9uIiwiY2xvc2VzdCIsImNhcmRPYmoiLCJwcmVwZW5kIiwicmVzZXQiLCJjYXJkIiwiYXBwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==